# 二进制文件读写
## 例子 personal_array.bin
### 初始位置
初始bb_pos = 0， 然后读取位于pos的4个字节uint32
前4字节为 0C 00 00 00<br/>
因为小端读写， 00 00 00 0C， 初始bb_pos = 12<br/>
### vector-length读取
从初始位置开始读取4字节的int的offset<br/>
offset = __offset(bb_pos, 4)  结果为<br/>
```
vtable = bb_pos - readint32(bb_pos) // vtable = 12 - 6 (06 00 00 00) = 6
read16(vtable + 4) // read16(10) --- 04 00 结果为4
```
```
length = __vector_len(bb_pos + offset) // __vector_len(12 + 4)
read32(16 + read32(16))     // read32(16 + 4) = read32(20) --90 05 00 00
```
结果1424
### vector 数据片段读取
获取初始位置
首先获取 offset = __offset(bb_pos, 4) 结果同上为4
```
    __vector(this.bb_pos + offset) // __vector(16)
    16 + read32(16) + 4 // 16 + 4 + 4 = 24
```
```
    __indirect(vector) // __indirect(24)
    24 + read32(24) // 24 + 412456 = 412480
```
```
     __indirect(24 + 4) // 28 + 412100 = 412128 read32(412128) = 60
     /**
        vtable 初始位置 412128 - 60 = 412068
      */
    前2位 0x3c00 => 0x003c = 60
    3-4位 0x5c00 => 0x005c = 72
    offset = 4 412068 + 4 = 412072 68
    offset = 6 412068 + 6 = 412074 = 67 412128 + 68
```
```hex
                3C 00 5C 00 44 00 43 00 00 00 00 00 
    40 00 3F 00 3E 00 3C 00 3A 00 38 00 37 00 36 00 
    34 00 33 00 32 00 2A 00 29 00 28 00 00 00 27 00 
    00 00 21 00 1B 00 14 00 10 00 0C 00 08 00 04 00 
    3C 00 00 00 58 00 00 00 94 00 00 00 94 00 00 00 
    9C 00 00 00 FC 00 00 00 00 00 00 2D 31 31 41 41 
    2D 00 00 00 01 00 00 01 32 14 01 00 00 00 00 00 
    00 00 07 01 00 0C 2D 03 22 00 41 00 41 00 03 0B
    A4 00 00 01 01 00 00 00 01 00 03 04 46 00 45 00 
    00 00 00 00 00 00 00 00 00 00 00 00 0F 00 00 00 
    21 00 01 00 2D 00 01 00 16 00 03 00 4A 00 06 00 
    49 00 09 00 4B 00 0C 00 4D 00 0F 00 4F 00 0F 00 
    92 01 12 00 24 00 15 00 E6 00 18 00 EB 00 1B 00 
    84 01 1E 00 B6 01 21 00 4C 00 24 00 00 00 00 00 
    04 00 00 00 50 00 5C 00 AE 00 13 01 30 00 00 00 
    0E 00 16 00 21 00 22 00 24 00 26 00 2D 00 49 00 
    4A 00 4B 00 4C 00 4D 00 4F 00 50 00 5C 00 9C 00 
    A4 00 AE 00 B6 00 BC 00 CA 00 CB 00 CC 00 CE 00 
    D6 00 E6 00 EB 00 F1 00 07 01 0E 01 13 01 1A 01 
    37 01 4B 01 59 01 84 01 92 01 9C 01 B5 01 B6 01 
    BF 01 DA 01 EB 01 08 02 44 02 23 03 53 03 75 03 
    01 00 00 00 10 00 04 00 00 00 00 00 00 00 00 00 
    02 00 00 00 3C 00 48 00 30 00 00 00 00 00 00 00 
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
    2E 00 00 00 00 00 26 00 00 00 00 00 00 00 00 00 
    00 00 20 00 1A 00 14 00 10 00 0C 00 08 00 04 00
```
vtable length 60<br>
0x44<br> 68
bb_pos = 412128
offset = bb_pos - read32(bb_pos) = 412068
read16(offset + 4) = 68
ele1 init read32(bb_pos + 68) = 412196
read16(offset + 6) = 67
ele2 read32(bb_pos + 67) = read32(412195) int8
read16(offset + 8) = 0
ele3 read32(bb_pos + 10) 0
read16(offset + 12) = 64
ele4 read32(bb_pos) = read32(412192)
read16(offset + 14) = read16(412082) = 63
ele5 int8 readint8(bb_pos+63) = readint8(412191) 11
read16(offset + 16) = read16(412084) = 62
ele6
read16(offset + 18) = read16(412086) = 60
ele7